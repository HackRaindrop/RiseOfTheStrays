/* 
 * Combined Bunker CSS for Rise of the Strays
 * This file combines bunker.css, bunker-new.css, bunker-drag-drop.css, and post-apocalyptic-rooms.css
 */

/* ==================== */
/* BUNKER BASE STYLES   */
/* ==================== */

/* Bunker section */
#bunker-section {
    margin-bottom: 20px;
}

/* Main container */
#bunker-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 10px;
    text-align: center;
}

/* Bunker grid - consistent rectangle size */
.bunker-grid {
    display: grid;
    gap: 0;
    background-color: #1a2530;
    padding: 0;
    border-radius: 5px;
    margin: 20px auto;
    position: relative;
    grid-template-columns: repeat(10, 60px);
    grid-template-rows: repeat(10, 60px);
    width: 600px;
    height: 600px;
    box-sizing: border-box;
    border: 1px solid #2c3e50;
}

/* Grid rows for better organization */
.grid-row {
    display: contents;
}

/* Grid cells */
.bunker-cell, .grid-cell {
    background-color: rgba(44, 62, 80, 0.5);
    border: 1px solid rgba(52, 73, 94, 0.2);
    width: 60px;
    height: 60px;
    position: relative;
    box-sizing: border-box;
    cursor: pointer;
    transition: background-color 0.2s;
}

.bunker-cell:hover, .grid-cell:hover {
    background-color: rgba(52, 73, 94, 0.5);
    cursor: pointer;
}

/* ==================== */
/* LAYER CONTROLS       */
/* ==================== */

/* Layer controls */
.layer-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 10px;
    background-color: #2c3e50;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.layer-info {
    font-weight: bold;
    color: #ecf0f1;
}

.layer-count {
    color: #3498db;
    font-size: 1.2em;
}

.unlock-layer-btn {
    background-color: #2ecc71;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s ease;
}

.unlock-layer-btn:hover {
    background-color: #27ae60;
    transform: translateY(-2px);
    box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
}

.unlock-layer-btn.disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Layer label styling */
.layer-label {
    background-color: #34495e;
    color: white;
    padding: 5px 10px;
    margin: 5px 0;
    border-radius: 3px;
    text-align: center;
    font-weight: bold;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
}

.layer-label.locked-layer-label {
    background-color: #7f8c8d;
    color: #ecf0f1;
    border: 1px dashed #95a5a6;
}

/* Layer dividers */
.layer-divider {
    grid-column: 1 / -1;
    height: 4px;
    background-color: #3498db;
    margin: 2px 0;
}

.layer-divider.locked-divider {
    background-color: #7f8c8d;
}

/* ==================== */
/* LOCKED CELLS         */
/* ==================== */

/* Locked layer styling */
.bunker-cell.locked-layer, .grid-cell.locked {
    background-color: rgba(44, 62, 80, 0.2);
    border: 1px dashed rgba(52, 73, 94, 0.2);
    position: relative;
    cursor: not-allowed;
}

.bunker-cell.locked-layer::before {
    content: 'ðŸ”’';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 16px;
    opacity: 0.3;
}

.lock-icon {
    font-size: 16px;
    opacity: 0.5;
}

.bunker-cell.locked-layer:hover {
    background-color: rgba(44, 62, 80, 0.3);
    cursor: not-allowed;
}

/* ==================== */
/* ROOM PLACEMENT       */
/* ==================== */

/* Cell highlight styles for placement */
.bunker-cell.valid-placement, .grid-cell.valid-placement {
    background-color: rgba(46, 204, 113, 0.3);
    transition: background-color 0.2s ease;
    box-shadow: inset 0 0 10px rgba(46, 204, 113, 0.5);
    border: 1px solid rgba(46, 204, 113, 0.5);
    z-index: 2;
}

.bunker-cell.invalid-placement, .grid-cell.invalid-placement {
    background-color: rgba(231, 76, 60, 0.3);
    transition: background-color 0.2s ease;
    box-shadow: inset 0 0 10px rgba(231, 76, 60, 0.5);
    border: 1px solid rgba(231, 76, 60, 0.5);
    z-index: 2;
}

/* Placement flash animation */
.placement-flash {
    position: absolute;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 3px;
    z-index: 5;
    pointer-events: none;
    animation: flash 0.3s ease-out;
}

@keyframes flash {
    0% { opacity: 0; }
    50% { opacity: 1; }
    100% { opacity: 0; }
}

/* Shake animation for invalid placement */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/* ==================== */
/* ROOMS                */
/* ==================== */

/* Rooms */
.bunker-room {
    position: absolute;
    background-color: #3498db;
    border-radius: 3px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    z-index: 2;
    box-sizing: border-box;
    border: 1px solid rgba(0, 0, 0, 0.2);
    overflow: hidden;
}

.bunker-room:hover {
    filter: brightness(1.1);
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.7);
}

/* Room preview styles */
.bunker-room.room-preview {
    opacity: 0.7;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    animation: pulse 1.5s infinite alternate;
    border: 2px dashed rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(2px);
    pointer-events: none;
    z-index: 3;
}

@keyframes pulse {
    from {
        opacity: 0.5;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
    }
    to {
        opacity: 0.8;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
    }
}

.room-icon {
    font-size: 24px;
    margin-bottom: 5px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    position: relative;
    z-index: 2;
}

.room-name {
    font-size: 12px;
    text-align: center;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    background-color: rgba(0, 0, 0, 0.2);
    padding: 2px 6px;
    border-radius: 10px;
    margin-top: 2px;
    z-index: 2;
    position: relative;
}

/* Very subtle gradient overlay for rooms */
.room-gradient-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.05) 0%,
        rgba(0, 0, 0, 0.05) 100%
    );
    pointer-events: none;
    z-index: 1;
    border-radius: 3px;
    opacity: 0.5;
}

/* ==================== */
/* ROOM SELECTION       */
/* ==================== */

/* Room selection */
#room-selection {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 15px 0;
    justify-content: center;
}

.room-selection-item {
    background-color: #34495e;
    border-radius: 5px;
    padding: 10px;
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
    width: calc(50% - 10px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    position: relative;
}

.room-selection-item.clickable:hover,
.room-selection-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.room-selection-item.selected {
    background-color: #2980b9;
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.7);
    transform: translateY(-2px);
    border: 2px solid #3498db;
}

.room-selection-item.selected::after {
    content: 'âœ“';
    position: absolute;
    top: 5px;
    right: 5px;
    color: #2ecc71;
    font-weight: bold;
    font-size: 16px;
}

.room-selection-item.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.room-selection-item .room-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    border-radius: 5px;
    margin-right: 10px;
}

.room-selection-item .room-info {
    flex: 1;
}

.room-selection-item .room-name {
    font-weight: bold;
    color: #f39c12;
    margin-bottom: 3px;
}

.room-selection-item .room-size,
.room-selection-item .room-cost,
.room-selection-item .room-effect {
    font-size: 0.8em;
    color: #ecf0f1;
}

.cost-enough {
    color: #2ecc71;
}

.cost-not-enough {
    color: #e74c3c;
}

/* ==================== */
/* DRAG AND DROP        */
/* ==================== */

/* Draggable room items */
.room-selection-item.draggable {
    cursor: grab;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative;
    overflow: hidden;
}

.room-selection-item.draggable:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.room-selection-item.draggable:active {
    cursor: grabbing;
}

.room-selection-item.draggable::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    transform: skewX(-25deg);
    animation: shine 3s infinite;
}

@keyframes shine {
    0% { left: -100%; }
    20% { left: 100%; }
    100% { left: 100%; }
}

/* Room clone during drag */
.room-drag-clone {
    cursor: grabbing;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
    transform: scale(0.9);
    transition: none;
    z-index: 1000;
    opacity: 0.9;
    border: 2px dashed rgba(255, 255, 255, 0.5);
}

/* Dropzone styles */
.bunker-grid.drop-active {
    outline: 2px dashed rgba(52, 152, 219, 0.7);
    background-color: rgba(26, 37, 48, 0.8);
}

/* ==================== */
/* POWER INDICATOR      */
/* ==================== */

/* Power indicator */
.power-indicator {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding: 5px 10px;
    background-color: #2c3e50;
    border-radius: 5px;
}

.power-icon {
    font-size: 18px;
    margin-right: 10px;
    color: #f1c40f;
}

.power-bar {
    flex: 1;
    height: 10px;
    background-color: #34495e;
    border-radius: 5px;
    overflow: hidden;
}

.power-fill {
    height: 100%;
    background-color: #f1c40f;
    transition: width 0.3s ease;
}

.power-text {
    margin-left: 10px;
    font-size: 0.9em;
}

/* ==================== */
/* CANCEL BUTTON        */
/* ==================== */

/* Cancel button */
#cancel-room-placement {
    display: none;
    margin: 10px auto;
    background-color: #e74c3c;
}

#cancel-room-placement:hover {
    background-color: #c0392b;
}

/* ==================== */
/* POST-APOCALYPTIC     */
/* ROOM STYLES          */
/* ==================== */

/* Add texture and wear to bunker rooms */
.bunker-room {
    background-image: linear-gradient(rgba(0, 0, 0, 0.2) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(0, 0, 0, 0.2) 1px, transparent 1px);
    background-size: 10px 10px;
    border: 1px solid rgba(0, 0, 0, 0.3);
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}

/* Living Quarters - worn, lived-in look */
.bunker-room[data-room-type="Living Quarters"] {
    background-color: #6b4226 !important;
    background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h20v20H0V0zm10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm20 0a7 7 0 1 0 0-14 7 7 0 0 0 0 14zM10 37a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm10-17h20v20H20V20zm10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14z' fill='%23593920' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
}

/* Power Generator - industrial, mechanical look */
.bunker-room[data-room-type="Power Generator"] {
    background-color: #444 !important;
    background-image: 
        linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%),
        linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%);
    background-size: 10px 10px;
    background-position: 0 0, 5px 5px;
    box-shadow: inset 0 0 15px rgba(255, 217, 0, 0.1);
}

/* Food - rustic, storage look */
.bunker-room[data-room-type="Food"] {
    background-color: #5e3b1c !important;
    background-image: url("data:image/svg+xml,%3Csvg width='84' height='48' viewBox='0 0 84 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h12v6H0V0zm28 8h12v6H28V8zm14-8h12v6H42V0zm14 0h12v6H56V0zm0 8h12v6H56V8zM42 8h12v6H42V8zm0 16h12v6H42v-6zm14-8h12v6H56v-6zm14 0h12v6H70v-6zm0-16h12v6H70V0zM28 32h12v6H28v-6zM14 16h12v6H14v-6zM0 24h12v6H0v-6zm0 8h12v6H0v-6zm14 0h12v6H14v-6zm14 8h12v6H28v-6zm-14 0h12v6H14v-6zm28 0h12v6H42v-6zm14-8h12v6H56v-6zm0-8h12v6H56v-6zm14 8h12v6H70v-6zm0 8h12v6H70v-6zM14 24h12v6H14v-6zm14-8h12v6H28v-6zM14 8h12v6H14V8zM0 8h12v6H0V8z' fill='%23472d16' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
}

/* Water Treatment - industrial, pipe-like look */
.bunker-room[data-room-type="Water Treatment"] {
    background-color: #1e4d6b !important;
    background-image: linear-gradient(to right, rgba(0, 0, 0, 0.1) 1px, transparent 1px),
                      linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
    background-size: 15px 15px;
}

/* Medical Bay - clinical, sterile look */
.bunker-room[data-room-type="Medical Bay"] {
    background-color: #2a4c3e !important;
    background-image: 
        linear-gradient(45deg, rgba(255, 255, 255, 0.05) 25%, transparent 25%, transparent 75%, rgba(255, 255, 255, 0.05) 75%),
        linear-gradient(-45deg, rgba(255, 255, 255, 0.05) 25%, transparent 25%, transparent 75%, rgba(255, 255, 255, 0.05) 75%);
    background-size: 20px 20px;
}

/* Workshop - industrial, tool-filled look */
.bunker-room[data-room-type="Workshop"] {
    background-color: #4d4d4d !important;
    background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 5v1H5z'/%3E%3Cpath d='M6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
}

/* Storage - simple, utilitarian look */
.bunker-room[data-room-type="Storage"] {
    background-color: #3d3d3d !important;
    background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h20L0 20z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
}

/* Add a subtle glow effect to room icons */
.room-icon {
    text-shadow: 0 0 5px currentColor;
}

/* Add a worn, damaged look to room borders */
.bunker-room::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23000000' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
    border-radius: 3px;
    pointer-events: none;
    z-index: 3;
    opacity: 0.5;
}

/* Add a subtle animation to power generator rooms */
@keyframes pulse-power {
    0% { box-shadow: inset 0 0 5px rgba(255, 217, 0, 0.2); }
    50% { box-shadow: inset 0 0 15px rgba(255, 217, 0, 0.4); }
    100% { box-shadow: inset 0 0 5px rgba(255, 217, 0, 0.2); }
}

.bunker-room[data-room-type="Power Generator"] {
    animation: pulse-power 3s infinite;
}

/* Add a subtle animation to medical bay rooms */
@keyframes pulse-medical {
    0% { box-shadow: inset 0 0 5px rgba(46, 204, 113, 0.2); }
    50% { box-shadow: inset 0 0 15px rgba(46, 204, 113, 0.3); }
    100% { box-shadow: inset 0 0 5px rgba(46, 204, 113, 0.2); }
}

.bunker-room[data-room-type="Medical Bay"] {
    animation: pulse-medical 4s infinite;
}

/* ==================== */
/* RESPONSIVE STYLES    */
/* ==================== */

/* Mobile styles */
@media (max-width: 767px) {
    /* Make cells larger on mobile for easier tapping */
    .bunker-cell, .grid-cell {
        min-width: 40px;
        min-height: 40px;
    }

    /* Adjust room selection items for touch */
    .room-selection-item {
        padding: 12px;
        margin-bottom: 10px;
        width: 100%;
    }
    
    .bunker-grid {
        grid-template-columns: repeat(auto-fill, 50px);
        grid-auto-rows: 50px;
    }
}

/* Tablet styles */
@media (min-width: 768px) and (max-width: 1023px) {
    .bunker-cell, .grid-cell {
        min-width: 35px;
        min-height: 35px;
    }

    .room-selection-item {
        transition: transform 0.2s ease;
    }

    .room-selection-item:hover {
        transform: translateY(-2px);
    }
    
    .bunker-grid {
        grid-template-columns: repeat(auto-fill, 55px);
        grid-auto-rows: 55px;
    }
    
    .bunker-cell {
        width: 55px;
        height: 55px;
    }
}

/* Desktop styles */
@media (min-width: 1024px) {
    .bunker-cell, .grid-cell {
        min-width: 40px;
        min-height: 40px;
        transition: background-color 0.2s ease;
    }

    .bunker-cell:hover, .grid-cell:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .room-selection-item {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .room-selection-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
}
